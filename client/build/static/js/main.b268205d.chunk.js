(this["webpackJsonppickbook-frontend"]=this["webpackJsonppickbook-frontend"]||[]).push([[0],{124:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(19),r=n.n(a),s=(n(124),n(9)),i=n.n(s),o=n(14),u=n(30),j=n(23),l=n(10),b=n(90),d=n.n(b).a.create({url:"https://pick-book.herokuapp.com/"}),O=(n(143),n(4)),f=function(){return Object(O.jsxs)("div",{className:"loading-container",children:[Object(O.jsxs)("h1",{class:"title",children:["PICK",Object(O.jsx)("span",{children:"BOOKS"})]}),Object(O.jsx)("div",{class:"rainbow-marker-loader"})]})},h=(n(145),n(72));h.a.initializeApp({apiKey:"AIzaSyDvwRCSlv7dc9AbcY-lB9S-ZXcUx1Is_es",authDomain:"pickbooks-c4fca.firebaseapp.com",projectId:"pickbooks-c4fca",storageBucket:"pickbooks-c4fca.appspot.com",messagingSenderId:"360999552689",appId:"1:360999552689:web:21ca375010b50b355d8490",measurementId:"G-1KG9S4EF21"}),h.a.analytics();var x=h.a,p=new x.auth.FacebookAuthProvider,g=new x.auth.GoogleAuthProvider,m=n(13),v={getEssentials:function(){return{type:"GET_ESSENTIALS"}},toggleFilter:function(){return{type:"TOGGLE_FILTER"}},addUserData:function(e){return{type:"ADD_USER_DATA",payload:e}},addIconToggle:function(){return{type:"ADD_ICON_TOGGLE"}},toggleLoading:function(){return{type:"TOGGLE_LOADING"}},logout:function(){return{type:"LOG_OUT"}}},k=function(e){return new Promise((function(t,n){return x.auth().signInWithPopup(e).then((function(e){var n={uid:e.user.uid,name:e.user.displayName,mail:e.user.email,phone:e.user.phoneNumber,photo:e.user.photoURL};d.post("/login",n).then((function(e){t(n)}))})).catch((function(e){return e}))}))};n(154);var w=function(e){var t=Object(m.b)();return Object(O.jsxs)("button",{onClick:function(){return n=e.provider,void k(n).then((function(e){t(v.addUserData(e))}));var n},className:e.class,children:[Object(O.jsx)("i",{className:e.icon}),e.label]})},N=(n(155),function(e){return Object(O.jsxs)("div",{className:"signin-card",children:[Object(O.jsx)("h3",{children:"Connect&Read"}),Object(O.jsx)(w,{class:"sign-btn fb",icon:"fab fa-facebook-f",label:"SignIn with Facebook",provider:p}),Object(O.jsx)(w,{class:"sign-btn google",icon:"fab fa-google",label:"SignIn with Google",provider:g}),Object(O.jsx)("p",{className:"have-or-not",children:"You can't post comment without signin."})]})}),y=function(){var e=Object(m.c)((function(e){return e.essentials}));return Object(O.jsx)("div",{className:"herobg-container",style:{backgroundImage:'url("/herobg/Herobg.jpg")'},children:Object(O.jsxs)("div",{className:"herobg-overlay",children:[Object(O.jsxs)("h1",{children:["Read&Build ",Object(O.jsx)("br",{}),"Knowledge"]}),!e.isLogin&&Object(O.jsx)(N,{})]})})},_=(n(156),function(e){return Object(O.jsx)(u.b,{to:"/book/"+e.bookId,className:"bookCard",style:{backgroundImage:"url(".concat(e.coverImage,")")}})}),S=(n(160),function(e){return Object(O.jsxs)("div",{className:"home-cards",children:[Object(O.jsx)("h2",{children:e.heading}),Object(O.jsx)("div",{className:"cards-slide",children:e.bookCover.map((function(e,t){return Object(O.jsx)(_,{bookId:e._id,coverImage:e.imageURL},t)}))})]})}),C=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(l.a)(r,2),u=s[0],j=s[1];return Object(c.useEffect)((function(){var e=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.get("/get-home-books").then(function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=6;break}return t.next=3,j({newBooks:n.data.newBooks,mostViewedBooks:n.data.mostViewedBooks});case 3:a(!1),t.next=7;break;case 6:e();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}),[]),Object(O.jsx)("div",{children:n?Object(O.jsx)(f,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(y,{}),Object(O.jsx)(S,{bookCover:u.newBooks,heading:"Newly Uploaded Books"}),Object(O.jsx)(S,{bookCover:u.mostViewedBooks,heading:"Most Viewed Books"})]})})},D=(n(161),n(94)),I=n.n(D),L=n(95),T=n.n(L),E=n(96),A=n.n(E),F={addFilter:function(e){return{type:"ADD_FILTER",payload:e}},clearFilter:function(){return{type:"REMOVE_FILTER"}},searchData:function(e){return{type:"SEARCH",payload:e}}};n(162);var R=function(e){var t=e.dataList,n=e.reset,c=Object(j.f)(),a=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(),c.push("/book/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"sug_container",children:t.map((function(e,t){return Object(O.jsx)("div",{onClick:function(){return a(e._id)},children:Object(O.jsx)("p",{onClick:function(){return a(e._id)},children:e.title})},t)}))})},G=n(92),B=n(93),U=n(112),V=n(111),P=(n(163),c.Component,n(67));var M=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.essentials})),n=Object(j.f)(),a=Object(c.useState)(""),r=Object(l.a)(a,2),s=r[0],u=r[1],b=Object(c.useState)([]),f=Object(l.a)(b,2),h=f[0],x=f[1],p=Object(c.useState)(!1),g=Object(l.a)(p,2),k=g[0],w=g[1],N=function(){u(""),x([])},y=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(F.searchData(s));case 2:N(),n.push("booklist");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),e.next=3,d.post("/search",{text:s}).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.data);case 2:return e.next=4,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!k);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to LogOut?")){t.next=4;break}return w(!k),t.next=4,d.get("/logout").then(function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=6;break}return t.next=3,e(v.logout());case 3:alert("You logout sucessfully"),t.next=7;break;case 6:alert("Somerthink went Worng!\nTry again later");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"header_container",children:[Object(O.jsxs)("h1",{onClick:function(){return n.push("/")},children:[Object(O.jsx)("strong",{children:"PICK"}),"BOOKS"]}),Object(O.jsxs)("button",{className:k?"logout-btn":"logout-btn logout-btn-hide",onClick:C,children:[Object(O.jsx)(P.a,{className:"logout-icon"}),"Logout"]}),Object(O.jsxs)("div",{className:"search_container",children:[Object(O.jsxs)("button",{onClick:function(){e(v.getEssentials()),e(v.toggleFilter())},children:["Filter",Object(O.jsx)(I.a,{})]}),Object(O.jsxs)("div",{className:"search_input",children:[Object(O.jsx)("input",{type:"text",placeholder:"Search books, generes, authors......",value:s,onChange:function(e){return _(e.target.value)},list:"search_suggestions"}),Object(O.jsx)(R,{dataList:h,reset:function(){return N()}})]}),Object(O.jsx)(T.a,{onClick:function(){return y()}})]}),t.isLogin?Object(O.jsx)("img",{src:t.userData.photo,onClick:S,alt:""}):Object(O.jsx)(A.a,{})]})},K=n(15),Y=(n(165),n(21)),q=n.n(Y),W=n(25),H=n.n(W),X=(n(166),n(98)),z=n.n(X),J=n(100),Z=n.n(J),Q=n(97),$=n.n(Q),ee=n(99),te=n.n(ee);n(167);var ne=function(e){return Object(O.jsxs)("div",{className:"message-card "+e.color,children:[Object(O.jsx)("p",{children:e.message}),Object(O.jsx)(u.b,{to:e.link,children:e.linkText})]})};var ce=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],j=Object(c.useState)(!1),b=Object(l.a)(j,2),f=b[0],h=b[1],x=Object(m.c)((function(e){return e.essentials})),p=Object(c.useState)(e.likes?e.likes.length:0),g=Object(l.a)(p,2),v=g[0],k=g[1],w=Object(c.useState)(e.disLikes?e.disLikes.length:0),N=Object(l.a)(w,2),y=N[0],_=N[1],S=function(e,t){D(e,t),a?(r(!1),k(v-1)):o?(u(!1),r(!0),k(v+1),_(y-1)):(r(!0),k(v+1))},C=function(e,t){D(e,t),o?(u(!1),_(y-1)):a?(r(!1),u(!0),_(y+1),k(v-1)):(u(!0),_(y+1))},D=function(e,t){x.userData?d.post("/like-or-dislike",{commentId:e,userId:x.userData.uid,condition:t}).then((function(e){console.log(e)})):(h(!0),setTimeout((function(){h(!1)}),2500))};return Object(O.jsxs)("div",{className:"comment_container",children:[f&&Object(O.jsx)(ne,{message:"Only loggedIn users able to like",link:"/",linkText:"Click here to login",color:"red"}),Object(O.jsxs)("div",{id:"user_name",children:[Object(O.jsx)("img",{src:e.userData[0].photo,alt:""}),Object(O.jsx)("p",{children:e.userData[0].name})]}),Object(O.jsx)("p",{id:"review-text-prop",className:e._id,children:e.review}),Object(O.jsxs)("div",{id:"like_container",children:[Object(O.jsxs)("div",{className:"like_up",children:[a?Object(O.jsx)($.a,{onClick:function(){return S(e._id,"like")}}):Object(O.jsx)(z.a,{onClick:function(){return S(e._id,"like")}}),e.likes?Object(O.jsx)("span",{children:v}):Object(O.jsx)("span",{children:"0"})]}),Object(O.jsxs)("div",{className:"like_down",children:[o?Object(O.jsx)(te.a,{onClick:function(){return C(e._id,"disLike")}}):Object(O.jsx)(Z.a,{onClick:function(){return C(e._id,"disLike")}}),e.disLikes?Object(O.jsx)("span",{children:y}):Object(O.jsx)("span",{children:"0"})]})]}),Object(O.jsx)("hr",{})]})},ae=(n(168),function(e){var t=Object(m.c)((function(e){return e.essentials})),n=Object(c.useState)(null),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(O.jsxs)("form",{className:"comment-field",onSubmit:function(e){e.preventDefault();var n={review:e.target[0].value,bookId:e.target[0].id,reviewer:t.userData.uid};""!==n.review&&d.post("/add-comment",n).then((function(t){s(t.data.message),e.target[0].value="",setTimeout((function(){s(null)}),2e3)}))},children:[r&&Object(O.jsx)(ne,{message:r,color:"green"}),Object(O.jsx)("textarea",{name:"comment",placeholder:"Type your review here...",className:"comment-input",id:e.book,cols:"30",rows:"3"}),Object(O.jsx)("button",{type:"submit",className:"comment-submit",children:"Submit"})]})}),re=(n(169),function(){var e=Object(j.g)().id,t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),i=Object(l.a)(s,2),o=i[0],u=i[1],b=Object(m.c)((function(e){return e.essentials})),f=function(t){u(!1),d.post("/post-rating",{bookId:e,userId:b.userData.uid,rate:t}).then((function(e){console.log(e),r(!0)}))};return Object(O.jsxs)("div",{className:o?"rating-drop-container":"rating-drop-container-hide",children:[a&&Object(O.jsx)(ne,{message:"Rated!!",link:"/book"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsxs)("button",{onClick:function(){return f(1)},children:[Object(O.jsx)(q.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{})]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{onClick:function(){return f(2)},children:[Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{})]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{onClick:function(){return f(3)},children:[Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(H.a,{})]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{onClick:function(){return f(4)},children:[Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(H.a,{})]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{onClick:function(){return f(5)},children:[Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{}),Object(O.jsx)(q.a,{})]})})]})]})}),se=function(){var e=Object(j.g)().id,t=Object(c.useState)(!0),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)({}),u=Object(l.a)(s,2),b=u[0],h=u[1],x=Object(c.useState)(!1),p=Object(l.a)(x,2),g=p[0],v=p[1],k=Object(c.useState)(!1),w=Object(l.a)(k,2),N=w[0],y=w[1],_=Object(c.useState)(!1),S=Object(l.a)(_,2),C=S[0],D=S[1],I=Object(c.useState)(!1),L=Object(l.a)(I,2),T=L[0],E=L[1],A=Object(c.useState)(!1),F=Object(l.a)(A,2),R=F[0],G=F[1],B=Object(c.useState)(!1),U=Object(l.a)(B,2),V=U[0],P=U[1],M=Object(m.c)((function(e){return e.essentials}));Object(c.useEffect)((function(){var t=function(){var n=Object(o.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.get("/getonebook/".concat(e)).then(function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.status){e.next=7;break}return e.next=3,h(n.data[0]);case 3:return e.next=5,r(!1);case 5:e.next=9;break;case 7:return e.next=9,t();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();d.get("/rating/".concat(e)).then((function(e){P(e.data)})),t(),d.get("/reviews/".concat(e)).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(t.data),0!==t.data.reviewCount?E(!0):E(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);return a?Object(O.jsx)(f,{}):Object(O.jsxs)("div",{className:"viewbook_container",children:[g&&Object(O.jsx)(ne,{message:g,link:"/",linkText:"Click here to login",color:"red"}),Object(O.jsxs)("div",{className:"book_container",children:[Object(O.jsx)("img",{src:b.imageURL,alt:""}),Object(O.jsxs)("div",{className:"book_detail",children:[Object(O.jsx)("h1",{children:b.title}),Object(O.jsxs)("p",{children:["by ",b.author]}),Object(O.jsxs)("div",{className:"star_review",children:[V.ratingValue>=1?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=2?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=3?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=4?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=5?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),Object(O.jsx)("button",{onClick:function(){M.userData?G(!R):(v("Please login to rate a book"),setTimeout((function(){v(!1)}),3e3))},children:"Rate the book"}),R&&Object(O.jsx)(re,{})]}),Object(O.jsx)("button",{onClick:function(){return window.open(b.link)},children:"Get This Book"})]})]}),Object(O.jsx)("div",{className:"book_description",children:Object(O.jsx)("p",{children:b.description})}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"book_review",children:[Object(O.jsx)("h2",{children:"Reviews of this book"}),Object(O.jsxs)("div",{className:"review_details",children:[V.ratingValue>=1?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=2?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=3?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=4?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),V.ratingValue>=5?Object(O.jsx)(q.a,{}):Object(O.jsx)(H.a,{}),Object(O.jsxs)("p",{children:[V?" "+V.ratingValue+"/5 | Rating: "+V.ratingCount:" 0/5 | Rating: 0"," |Reviews:",C.reviewCount," "]})]}),Object(O.jsx)("button",{onClick:function(e){e.preventDefault(),M.userData?y(!N):(v("Please login to write you review"),setTimeout((function(){v(!1)}),3e3))},children:"Write your Review"}),N&&Object(O.jsx)(ae,{book:e})]}),Object(O.jsx)("hr",{}),T?Object(O.jsx)(O.Fragment,{children:C.reviews.map((function(e,t){return Object(c.createElement)(ce,Object(K.a)(Object(K.a)({},e),{},{key:t}))}))}):Object(O.jsx)("h5",{children:"No reviews yet"}),Object(O.jsx)("button",{id:"show_more",children:"Show More"})]})},ie=(n(170),function(){return Object(O.jsxs)(u.b,{to:"/add-book",className:"add-icon-large",children:[Object(O.jsx)("i",{class:"fas fa-plus"}),Object(O.jsx)(u.b,{to:"/add-book",className:"add-dailogue",children:"Add Books"})]})}),oe=n(70),ue=(n(171),n(102)),je=n(53),le=(n(172),n(101)),be=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(O.jsxs)("button",{className:"filter-button",name:e.title,id:e.children,onClick:function(t){e.setdata(Object(je.a)({},e.title,e.children)),r(!a)},children:[e.children,a?Object(O.jsx)(le.a,{}):""]})},de=(n(173),n(174),function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(O.jsxs)("div",{className:"year-selector-container",children:[Object(O.jsx)("input",{onInput:function(e){r(e.target.value+"")},type:"range",onChange:function(){return e.setdata({year:a})},name:"year-selector",id:"year-selector",className:"year-selector",min:"1845",max:"2021"}),Object(O.jsx)("p",{children:a})]})}),Oe=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],s=function(){return r(!a)};return Object(O.jsxs)("div",{className:"language-filter",children:[Object(O.jsxs)("header",{onClick:s,children:[Object(O.jsx)("h3",{children:e.title}),Object(O.jsx)(ue.a,{className:a?"filter-drop filter-drop-active":"filter-drop",onClick:s})]}),e.year?Object(O.jsx)("div",{className:a?"filter-option":"filter-option filter-option-close",children:Object(O.jsx)(de,{setdata:function(t){e.setdata(t)}})}):Object(O.jsx)("div",{className:a?"filter-option":"filter-option filter-option-close",children:e.item.map((function(t,n){return Object(O.jsx)(be,{setdata:function(t){e.setdata(t)},children:t,title:e.title},n)}))})]})},fe=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.essentials})),n=Object(j.f)(),a=Object(c.useState)({}),r=Object(l.a)(a,2),s=r[0],u=r[1],b=function(e){u(Object(K.a)(Object(K.a)({},s),e))},d=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(F.addFilter(s));case 2:n.push("/booklist"),e(v.toggleFilter());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"filter-container",children:[Object(O.jsxs)("header",{children:[Object(O.jsxs)("h1",{children:["PICK",Object(O.jsx)("span",{children:"BOOKS"})]}),Object(O.jsx)(oe.b,{className:"close-icon",onClick:function(){return e(v.toggleFilter())}})]}),Object(O.jsxs)("div",{className:"filter-content",children:[Object(O.jsx)(Oe,{title:"Genres",item:t.genres,data:s,setdata:function(e){b(e)}}),Object(O.jsx)(Oe,{title:"Language",item:t.languages,data:s,setdata:function(e){b(e)}}),Object(O.jsx)(Oe,{title:"Year of publication",year:!0,data:s,setdata:function(e){b(e)}})]}),Object(O.jsxs)("div",{className:"apply-and-reset",children:[Object(O.jsx)("button",{children:"Reset"}),Object(O.jsx)("button",{onClick:function(){return d()},children:"Apply"})]})]})},he=(n(175),n(103)),xe=n.n(he),pe=n(104),ge=n.n(pe),me=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),u=s[0],j=s[1],b=Object(c.useState)(1),h=Object(l.a)(b,2),x=h[0],p=h[1],g=Object(m.c)((function(e){return e.filter}));Object(c.useEffect)((function(){var e=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.isSearch){t.next=5;break}return t.next=3,d.post("search",{text:g.searchText}).then(function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=7;break}return t.next=3,a(n.data);case 3:return t.next=5,j(!1);case 5:t.next=9;break;case 7:return t.next=9,e();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:t.next=12;break;case 5:if(!g.isFilter){t.next=10;break}return t.next=8,d.post("/filter",g.filterData).then(function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=7;break}return t.next=3,a(n.data);case 3:return t.next=5,j(!1);case 5:t.next=9;break;case 7:return t.next=9,e();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:t.next=12;break;case 10:return t.next=12,d.get("/getallbooks").then(function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=7;break}return t.next=3,a(n.data);case 3:return t.next=5,j(!1);case 5:t.next=9;break;case 7:return t.next=9,e();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}),[g]);var v=function(e){1===x&&-1===e?alert("Its the first page!"):x===k&&1===e?alert("its the last page"):p(x+e)},k=n.length/8>Math.floor(n.length/8)?Math.floor(n.length/8+1):Math.floor(n.length/8),w=8*x,N=w-8,y=n.slice(N,w);return u?Object(O.jsx)(f,{}):Object(O.jsxs)("div",{className:"booklist_container",children:[Object(O.jsx)("h1",{children:"Books Listed As You Wish"}),Object(O.jsxs)("span",{children:["we found ",n.length," results"]}),Object(O.jsx)("div",{className:"booklist_list",children:y.map((function(e,t){return Object(O.jsx)(_,{coverImage:e.imageURL,bookId:e._id},t)}))}),Object(O.jsxs)("div",{className:"pagination",children:[Object(O.jsx)(xe.a,{onClick:function(){return v(-1)}}),Array.from(Array(k),(function(e,t){return t+1===x?Object(O.jsx)("p",{className:"active",children:t+1}):Object(O.jsx)("p",{onClick:function(){return p(t+1)},children:t+1})})),Object(O.jsx)(ge.a,{onClick:function(){return v(1)}})]})]})},ve=(n(176),n(106)),ke=n.n(ve),we=n(105),Ne=n.n(we),ye=n(107),_e=n.n(ye);var Se=function(){return Object(O.jsxs)("div",{className:"footer_container",children:[Object(O.jsxs)("div",{className:"footer_section_one",children:[Object(O.jsxs)("h1",{children:[Object(O.jsx)("strong",{children:"PICK"}),"BOOKS"]}),Object(O.jsx)("p",{children:"By Texkidevelopers"}),Object(O.jsxs)("div",{className:"footer_social_media",children:[Object(O.jsx)(Ne.a,{}),Object(O.jsx)(ke.a,{}),Object(O.jsx)(_e.a,{})]})]}),Object(O.jsx)("div",{className:"footer_section_two",children:Object(O.jsx)("p",{children:"Copyright to texkidevelopers \xa9 2021"})}),Object(O.jsxs)("div",{className:"footer_section_three",children:[Object(O.jsx)("h2",{children:"Filter Books by"}),Object(O.jsx)("p",{children:"Author"}),Object(O.jsx)("p",{children:"Generes"}),Object(O.jsx)("p",{children:"Language"}),Object(O.jsx)("p",{children:"Year Of Publication"})]})]})},Ce=(n(177),n(224)),De=n(219),Ie=(n(178),function(){return Object(O.jsxs)("div",{className:"not-logged-in",children:[Object(O.jsx)("img",{className:"oops",src:"/oops/oops.svg",alt:"Oops"}),Object(O.jsx)("p",{className:"oops-text",children:"This service is only available for logged in users"}),Object(O.jsx)(u.b,{className:"oops-link",to:"/",children:"Click here to get login page"})]})}),Le=n(225),Te=n(223),Ee=n(222),Ae=Object(De.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"25ch"},"& .MuiTextField-root":{margin:e.spacing(1),width:200}}}})),Fe=function(){var e=Ae(),t=Object(c.useState)({}),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(null),u=Object(l.a)(s,2),j=u[0],b=u[1],f=Object(c.useState)(null),h=Object(l.a)(f,2),p=h[0],g=h[1],k=Object(c.useState)(null),w=Object(l.a)(k,2),N=w[0],y=w[1],_=Object(c.useState)(!1),S=Object(l.a)(_,2),C=S[0],D=S[1],I=Object(c.useState)(!1),L=Object(l.a)(I,2),T=L[0],E=L[1],A=Object(c.useState)(""),F=Object(l.a)(A,2),R=F[0],G=F[1],B=Object(m.c)((function(e){return e.essentials})),U=Object(m.b)();Object(c.useEffect)((function(){U(v.addIconToggle())}),[U]),Object(c.useLayoutEffect)((function(){return function(){U(v.addIconToggle())}}),[U]);var V=function(e){r(Object(K.a)(Object(K.a)({},a),{},Object(je.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)("div",{className:"add_book_container",children:[C?Object(O.jsx)(ne,{message:C,link:"/",color:R}):null,B.userData?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{className:"heading_book",children:"Add Book"}),Object(O.jsxs)("form",{className:e.root,id:"frm",autoComplete:"off",onSubmit:function(e){e.preventDefault(),C?D("Can't upload this type of file.."):new Promise(function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E("Uploading file"),D("Please Wait while uploading!"),e.next=4,x.storage().ref("cover-images/".concat(j+p.name)).put(p).then((function(){x.storage().ref("cover-images").child(j+p.name).getDownloadURL().then((function(e){var n=Object(K.a)(Object(K.a)({},a),{},{imageURL:e,userId:B.userData.uid});E("File Uploaded"),t(n)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),d.post("/add-book",e).then((function(e){D("Book Added successfully"),console.log(e.data.status)}))}))},children:[Object(O.jsxs)("div",{className:"inputs-container photo_upload",children:[Object(O.jsx)("input",{type:"file",id:"upload",onChange:function(e){g(e.target.files[0]);var t=new Date;"image/jpg"===e.target.files[0].type||"image/jpeg"===e.target.files[0].type?(b(t.getTime()+"-"+t.getDate()+"-"+t.getFullYear()+"-"+t.getMonth()+"-"),y(URL.createObjectURL(e.target.files[0])),D(!1),G("red")):"image/png"===e.target.files[0].type?(b(t.getTime()+"-"+t.getDate()+"-"+t.getFullYear()+"-"+t.getMonth()+"-"),y(URL.createObjectURL(e.target.files[0])),D(!1),G("")):(D("Only allows jpg or png format files."),G("red"))},hidden:!0}),Object(O.jsx)("label",{style:{backgroundImage:"url(".concat(N,")")},id:"cover",for:"upload",children:"ADD PHOTO"}),Object(O.jsx)("label",{id:"title",children:T||"Cover photo"})]}),Object(O.jsxs)("div",{className:"inputs-container",children:[Object(O.jsx)(Ce.a,{className:"inputs",label:"IBN Number",required:!0,name:"ibn",onChange:V}),Object(O.jsx)(Ce.a,{className:"inputs",label:"Author Name",required:!0,name:"author",onChange:V})]}),Object(O.jsxs)("div",{className:"inputs-container",children:[Object(O.jsx)(Ce.a,{className:"inputs",label:"Book title",required:!0,name:"title",onChange:V}),Object(O.jsx)(Ce.a,{className:"inputs",label:"Link to purchase",required:!0,name:"link",onChange:V})]}),Object(O.jsxs)("div",{className:"inputs_dropdown",children:[Object(O.jsxs)("div",{className:"input_cent",children:[Object(O.jsx)(Le.a,{id:"add_language",children:"Language"}),Object(O.jsx)(Ee.a,{labelId:"add_language",onChange:V,name:"Language",children:B.languages.map((function(e,t){return Object(O.jsx)(Te.a,{value:e,children:e},t)}))})]}),Object(O.jsxs)("div",{className:"input_cent",children:[Object(O.jsx)(Le.a,{id:"add_genere",children:"Genres"}),Object(O.jsx)(Ee.a,{labelId:"add_genere",name:"Genres",onChange:V,children:B.genres.map((function(e,t){return Object(O.jsx)(Te.a,{value:e,children:e},t)}))})]}),Object(O.jsx)(Ce.a,{type:"number",onChange:V,label:"year",required:!0,name:"year"})]}),Object(O.jsx)("div",{className:"inputs-container ",children:Object(O.jsx)(Ce.a,{className:"description",multiline:!0,rowsMax:4,onChange:V,label:"Description",required:!0,name:"description"})}),Object(O.jsx)("div",{className:"ab-button-container",children:Object(O.jsx)("button",{className:"ab-button",type:"submit",children:"Add Book"})})]})]}):Object(O.jsx)(Ie,{})]})},Re=n(108),Ge=n(109),Be=(n(180),n(181),function(e){var t=Object(m.b)(),n=Object(j.f)(),c=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to LogOut?")){e.next=3;break}return e.next=3,d.get("/logout").then(function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.status){e.next=6;break}return e.next=3,t(v.logout());case 3:alert("You logout sucessfully"),e.next=7;break;case 6:alert("Somerthink went Worng!\nTry again later");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(e){var a=e.target.id;switch(console.log(a),a){case"filter":t(v.getEssentials()),t(v.toggleFilter()),console.log("filter");break;case"/add-book":n.push("/add-book");break;case"logout":c()}};return Object(O.jsxs)("div",{className:"mobile-options",onClick:a,children:[e.icon,Object(O.jsx)("p",{children:e.option}),Object(O.jsx)("div",{onClick:a,id:e.click,className:"for-click"})]})}),Ue=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1],Object(m.c)((function(e){return e.essentials})));Object(m.b)();return Object(O.jsxs)("div",{className:"mobile-footer",children:[n.userData&&Object(O.jsx)(Be,{option:"Logout",click:"logout",icon:Object(O.jsx)(P.a,{})}),Object(O.jsx)(Be,{option:"Add books",click:"/add-book",icon:Object(O.jsx)(oe.a,{})}),Object(O.jsx)(Be,{option:"Filter",click:"filter",icon:Object(O.jsx)(Re.a,{})}),Object(O.jsx)(Be,{option:"Account",click:n.isLogin?"logout":null,icon:n.isLogin?Object(O.jsx)("img",{src:n.userData.photo,alt:""}):Object(O.jsx)(Ge.a,{})})]})};var Ve=function(){var e=Object(m.c)((function(e){return e.essentials})),t=Object(m.b)();return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/checkuser");case 2:(n=e.sent).data.status&&t(v.addUserData(n.data.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(O.jsxs)(u.a,{children:[e.filter?Object(O.jsx)(fe,{}):null,Object(O.jsx)(Ue,{}),e.headAndFootShow?Object(O.jsx)(M,{}):null,e.addIcon?Object(O.jsx)(ie,{}):null,e.loading?Object(O.jsx)(f,{}):null,Object(O.jsxs)(j.c,{children:[Object(O.jsx)(j.a,{path:"/",exact:!0,children:Object(O.jsx)(C,{})}),Object(O.jsx)(j.a,{path:"/add-book",children:Object(O.jsx)(Fe,{})}),Object(O.jsx)(j.a,{path:"/book/:id",children:Object(O.jsx)(se,{})}),Object(O.jsx)(j.a,{path:"/booklist",children:Object(O.jsx)(me,{})})]}),e.headAndFootShow?Object(O.jsx)(Se,{}):null]})},Pe=n(71),Me={isLogin:!1,addIcon:!0,headAndFootShow:!0,userData:null,filter:!1,languages:["English","Hindi","Tamil","Urdu","Malayalam"],genres:["fiction","children's","Gaming","Programming","christian","cookbooks"],loading:!1},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(K.a)({},Me),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ESSENTIALS":return e=Me;case"TOGGLE_FILTER":return e=Object(K.a)(Object(K.a)({},e),{},{filter:!e.filter});case"ADD_USER_DATA":return e=Object(K.a)(Object(K.a)({},e),{},{userData:t.payload,isLogin:!0});case"ADD_ICON_TOGGLE":return e=Object(K.a)(Object(K.a)({},e),{},{addIcon:!e.addIcon,headAndFootShow:!e.headAndFootShow});case"TOGGLE_LOADING":return e=Object(K.a)(Object(K.a)({},e),{},{loading:!e.loading});case"LOG_OUT":var n=Object(K.a)(Object(K.a)({},e),{},{userData:null,isLogin:null});return n;default:return e}},Ye={isFilter:!1,filterData:null,isSearch:!1,searchText:""},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FILTER":var n=Object(K.a)(Object(K.a)({},e),{},{isFilter:!0,filterData:t.payload,isSearch:!1});return n;case"REMOVE_FILTER":var c=Object(K.a)(Object(K.a)({},e),{},{isFilter:!1,filterData:null});return c;case"SEARCH":var a=Object(K.a)(Object(K.a)({},e),{},{isSearch:!0,searchText:t.payload,isFilter:!1,filterData:null});return a;default:return e}},We=Object(Pe.a)({essentials:Ke,filter:qe}),He=Object(Pe.b)(We,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(Object(O.jsx)(m.a,{store:He,children:Object(O.jsx)(Ve,{})}),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.b268205d.chunk.js.map